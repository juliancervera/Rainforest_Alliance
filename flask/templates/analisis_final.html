<!DOCTYPE html>
<html>
<head>
    <title>Análisis final</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/styles.css') }}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js"></script>
</head>
<body id="body">
    <h1>Costos totales: {{ costos_totales }}</h1>
    <h1>Costos totales por unidad: {{ costos_totales_por_unidad }}</h1>
    <br>
    <h2>Resumen de costos</h2>
    <p>(No considera impuestos sobre la venta)</p>
    {% if costos_autoempleo_totales > 0.001 %}
    <table>
        <tr>
            <th>Categoría <span>de</span> costos</th>
            <th>Total <span>de la</span><br>categoría</th>
            <th>% de los<br>costos totales</th>
            <th>% <span>del</span> total sin<br>autoempleo</th>
        </tr>
        <tr>
            <td>Variables<sup class="footnote"><b>1</b></sup></td>
            <td>{{ costos_variables_totales }}</td>
            <td>{{ costos_variables_totales_porcent_total }}</td>
            <td>{{ costos_variables_totales_porcent_total_sin }}</td>
        </tr>
        <tr>
            <td>Fijos<sup class="footnote"><b>2</b></sup></td>
            <td>{{ costos_fijos_totales }}</td>
            <td>{{ costos_fijos_totales_porcent_total }}</td>
            <td>{{ costos_fijos_totales_porcent_total_sin }}</td>
        </tr>
        <tr>
            <td>Variables sin autoempleo<sup class="footnote"><b>3</b></sup></td>
            <td>{{ costos_variables_totales_sin_autoempleo }}</td>
            <td>{{ costos_variables_totales_sin_autoempleo_porcent_total }}</td>
            <td>{{ costos_variables_totales_sin_autoempleo_porcent_total_sin }}</td>
        </tr>
        <tr>
            <td>Fijos sin autoempleo<sup class="footnote"><b>4</b></sup></td>
            <td>{{ costos_fijos_totales_sin_autoempleo }}</td>
            <td>{{ costos_fijos_totales_sin_autoempleo_porcent_total }}</td>
            <td>{{ costos_fijos_totales_sin_autoempleo_porcent_total_sin }}</td>
        </tr>
        <tr>
            <td>Laborales<sup class="footnote"><b>5</b></sup></td>
            <td>{{ costos_laborales_totales }}</td>
            <td>{{ costos_laborales_totales_porcent_total }}</td>
            <td>{{ costos_laborales_totales_porcent_total_sin }}</td>
        </tr>
        <tr>
            <td>Empleo<sup class="footnote"><b>6</b></sup></td>
            <td>{{ costos_laborales_totales_sin_autoempleo }}</td>
            <td>{{ costos_laborales_totales_sin_autoempleo_porcent_total }}</td>
            <td>{{ costos_laborales_totales_sin_autoempleo_porcent_total_sin }}</td>
        </tr>
        <tr>
            <td>Autoempleo<sup class="footnote"><b>7</b></sup></td>
            <td>{{ costos_autoempleo_totales }}</td>
            <td>{{ costos_autoempleo_totales_porcent_total }}</td>
            <td>{{ costos_autoempleo_totales_porcent_total_sin }}</td>
        </tr>
        <tr>
            <td>Laborales actividades<sup class="footnote"><b>8</b></sup></td>
            <td>{{ costos_laborales_actividades_totales }}</td>
            <td>{{ costos_laborales_actividades_totales_porcent_total }}</td>
            <td>{{ costos_laborales_actividades_totales_porcent_total_sin }}</td>
        </tr>
        <tr>
            <td>Empleo actividades<sup class="footnote"><b>9</b></sup></td>
            <td>{{ costos_empleo_actividades_totales }}</td>
            <td>{{ costos_empleo_actividades_totales_porcent_total }}</td>
            <td>{{ costos_empleo_actividades_totales_porcent_total_sin }}</td>
        </tr>
        <tr>
            <td>Autoempleo actividades<sup class="footnote"><b>10</b></sup></td>
            <td>{{ costos_autoempleo_actividades_totales }}</td>
            <td>{{ costos_autoempleo_actividades_totales_porcent_total }}</td>
            <td>{{ costos_autoempleo_actividades_totales_porcent_total_sin }}</td>
        </tr>
        <tr>
            <td>Laborales fijos<sup class="footnote"><b>11</b></sup></td>
            <td>{{ sueldos_fijos_totales }}</td>
            <td>{{ sueldos_fijos_totales_porcent_total }}</td>
            <td>{{ sueldos_fijos_totales_porcent_total_sin }}</td>
        </tr>
        <tr>
            <td>Empleo fijo<sup class="footnote"><b>12</b></sup></td>
            <td>{{ sueldos_fijos_totales_sin_autoempleo }}</td>
            <td>{{ sueldos_fijos_totales_sin_autoempleo_porcent_total }}</td>
            <td>{{ sueldos_fijos_totales_sin_autoempleo_porcent_total_sin }}</td>
        </tr>
        <tr>
            <td>Autoempleo fijo<sup class="footnote"><b>13</b></sup></td>
            <td>{{ sueldos_fijos_autoempleo }}</td>
            <td>{{ sueldos_fijos_autoempleo_porcent_total }}</td>
            <td>{{ sueldos_fijos_autoempleo_porcent_total_sin }}</td>
        </tr>
        <tr>
            <td>Insumos<sup class="footnote"><b>14</b></sup></td>
            <td>{{ costos_insumos_totales }}</td>
            <td>{{ costos_insumos_totales_porcent_total }}</td>
            <td>{{ costos_insumos_totales_porcent_total_sin }}</td>
        </tr>
        <tr>
            <td>Insumos actividades<sup class="footnote"><b>15</b></sup></td>
            <td>{{ costos_insumos_actividades_totales }}</td>
            <td>{{ costos_insumos_actividades_totales_porcent_total }}</td>
            <td>{{ costos_insumos_actividades_totales_porcent_total_sin }}</td>
        </tr>
        <tr>
            <td>Insumos fijos<sup class="footnote"><b>16</b></sup></td>
            <td>{{ costos_insumos_fijos_totales }}</td>
            <td>{{ costos_insumos_fijos_totales_porcent_total }}</td>
            <td>{{ costos_insumos_fijos_totales_porcent_total_sin }}</td>
        </tr>
        <tr>
            <td>Impuestos fijos</td>
            <td>{{ impuestos_fijos_totales }}</td>
            <td>{{ impuestos_fijos_totales_porcent_total }}</td>
            <td>{{ impuestos_fijos_totales_porcent_total_sin }}</td>
        </tr>
        <tr>
            <td>Certificación</td>
            <td>{{ costos_certificacion_totales }}</td>
            <td>{{ costos_certificacion_totales_porcent_total }}</td>
            <td>{{ costos_certificacion_totales_porcent_total_sin }}</td>
        </tr>
        <tr>
            <td>Exportación</td>
            <td>{{ costos_exportacion_totales }}</td>
            <td>{{ costos_exportacion_totales_porcent_total }}</td>
            <td>{{ costos_exportacion_totales_porcent_total_sin }}</td>
        </tr>
    </table>
    <p><b class="footnote">1</b>: Los costos variables son aquellos que aumentan si la cantidad producida aumenta. Incluyen los costos de las actividades del proceso productivo, los costos de certificación y los costos de exportación.</p>
    <p><b class="footnote">2</b>: Los costos fijos son aquellos que se mantienen constantes sin importar la cantidad producida. Incluyen los costos indicados por el usuario en las páginas de costos fijos e impuestos fijos.</p>
    <p><b class="footnote">3</b>: Esta categoría sólo incluye los costos variables que implican un gasto monetario, excluyendo los costos de autoempleo.</p>
    <p><b class="footnote">4</b>: Esta categoría sólo incluye los costos fijos que implican un gasto monetario, excluyendo los costos de autoempleo.</p>
    <p><b class="footnote">5</b>: Los costos laborales incluyen los costos de empleo y autoempleo, tanto de los sueldos fijos como de los costos de mano de obra de las actividades del proceso productivo.</p>
    <p><b class="footnote">6</b>: Esta categoría incluye todos los sueldos pagados, tanto los sueldos fijos como los costos de mano de obra de las actividades del proceso productivo, excluyendo costos de autoempleo.</p> 
    <p><b class="footnote">7</b>: Incluye todos los costos de autoempleo, tanto los fijos como los que forman parte de las actividades del proceso productivo.</p> 
    <p><b class="footnote">8</b>: Incluye todos los costos de mano de obra de las actividades del proceso productivo, tanto las remuneraciones pagadas como el autoempleo.</p> 
    <p><b class="footnote">9</b>: Incluye únicamente las remuneraciones pagadas como parte de las actividades del proceso productivo, excluyendo el autoempleo.</p> 
    <p><b class="footnote">10</b>: Incluye únicamente los costos de autoempleo de las actividades del proceso productivo.</p>
    <p><b class="footnote">11</b>: Inlcuye todos los costos laborales fijos, tanto los sueldos pagados como el autoempleo.</p>
    <p><b class="footnote">12</b>: Incluye únicamente los sueldos fijos pagados, excluyendo el autoempleo.</p> 
    <p><b class="footnote">13</b>: Incluye únicamente los costos de autoempleo fijos.</p> 
    <p><b class="footnote">14</b>: Incluye tanto los costos de insumos fijos como los costos de insumos de las actividades del proceso productivo.</p>
    <p><b class="footnote">15</b>: Incluye únicamente los costos de insumos de las actividades del proceso productivo.</p> 
    <p><b class="footnote">16</b>: Incluye únicamente los costos de insumos fijos.</p> 
    {% else %}
    <table>
        <tr>
            <th>Categoría de costos</th>
            <th>Total de la categoría</th>
            <th>% de los costos totales</th>
        </tr>
        <tr>
            <td>Variables<sup class="footnote"><b>1</b></sup></td>
            <td>{{ costos_variables_totales }}</td>
            <td>{{ costos_variables_totales_porcent_total }}</td>
        </tr>
        <tr>
            <td>Fijos<sup class="footnote"><b>2</b></sup></td>
            <td>{{ costos_fijos_totales }}</td>
            <td>{{ costos_fijos_totales_porcent_total }}</td>
        </tr>
        <tr>
            <td>Laborales<sup class="footnote"><b>3</b></sup></td>
            <td>{{ costos_laborales_totales }}</td>
            <td>{{ costos_laborales_totales_porcent_total }}</td>
        </tr>
        <tr>
            <td>Mano de obra actividades<sup class="footnote"><b>4</b></sup></td>
            <td>{{ costos_laborales_actividades_totales }}</td>
            <td>{{ costos_laborales_actividades_totales_porcent_total }}</td>
        </tr>
        <tr>
            <td>Sueldos fijos<sup class="footnote"><b>5</b></sup></td>
            <td>{{ sueldos_fijos_totales }}</td>
            <td>{{ sueldos_fijos_totales_porcent_total }}</td>
        </tr>
        <tr>
            <td>Insumos<sup class="footnote"><b>6</b></sup></td>
            <td>{{ costos_insumos_totales }}</td>
            <td>{{ costos_insumos_totales_porcent_total }}</td>
        </tr>
        <tr>
            <td>Insumos actividades<sup class="footnote"><b>7</b></sup></td>
            <td>{{ costos_insumos_actividades_totales }}</td>
            <td>{{ costos_insumos_actividades_totales_porcent_total }}</td>
        </tr>
        <tr>
            <td>Insumos fijos<sup class="footnote"><b>8</b></sup></td>
            <td>{{ costos_insumos_fijos_totales }}</td>
            <td>{{ costos_insumos_fijos_totales_porcent_total }}</td>
        </tr>
        <tr>
            <td>Impuestos fijos</td>
            <td>{{ impuestos_fijos_totales }}</td>
            <td>{{ impuestos_fijos_totales_porcent_total }}</td>
        </tr>
        <tr>
            <td>Certificación</td>
            <td>{{ costos_certificacion_totales }}</td>
            <td>{{ costos_certificacion_totales_porcent_total }}</td>
        </tr>
        <tr>
            <td>Exportación</td>
            <td>{{ costos_exportacion_totales }}</td>
            <td>{{ costos_exportacion_totales_porcent_total }}</td>
        </tr>
    </table>
    <p><b class="footnote">1</b>: Los costos variables son aquellos que aumentan si la cantidad producida aumenta. Incluyen los costos de las actividades del proceso productivo, los costos de certificación y los costos de exportación.</p>
    <p><b class="footnote">2</b>: Los costos fijos son aquellos que se mantienen constantes sin importar la cantidad producida. Incluyen los costos indicados por el usuario en las páginas de costos fijos e impuestos fijos.</p>
    <p><b class="footnote">3</b>: Los costos laborales incluyen tanto los sueldos fijos como los costos de mano de obra de las actividades del proceso productivo.</p>
    <p><b class="footnote">4</b>: Esta categoría sólo incluye los costos de mano de obra de las actividades del proceso productivo.</p> 
    <p><b class="footnote">5</b>: Incluye únicamente las remuneraciones o sueldos fijos.</p> 
    <p><b class="footnote">6</b>: Incluye tanto los costos de insumos fijos como los costos de insumos de las actividades del proceso productivo.</p> 
    <p><b class="footnote">7</b>: Incluye únicamente los costos de insumos de las actividades del proceso productivo.</p> 
    <p><b class="footnote">8</b>: Incluye únicamente los costos de insumos fijos.</p> 
    {% endif %}


    <h1>Slider Example</h1>
    <div class="interactive">
    <input type="range" class="interactive" min="0" max="{{ costos_totales_por_unidad * 10 }}" value="0" step="1" id="slider">
    </div>
    <table>
        <tr>
            <th>Indicadores financieros</th>
            <th>Valores</th>
        </tr>
        <tr>
            <td>Núm. de unidades producidas ({{ unidad }})</td>
            <td>{{ cantidad_vendida }}</td>
        </tr>
        <tr>
            <td>Precio de venta por unidad</td>
            <td id="precioCell">0</td>
        </tr>
        <tr>
            <td>Ingresos totales{% if impuestos_venta %}<sup class="footnote"><b>✱</b>{% endif %}</td>
            <td id="ingresosTotalesValue">0</td>
        </tr>
        <tr>
            <td>Ganancias brutas (sin considerar costos de autoempleo)</td>
            <td id="gananciasBrutasValue">{{ costos_totales_sin_autoempleo * (-1) }}</td>
        </tr>
        <tr>
            <td>Ganancias netas (consideran costos de autoempleo)</td>
            <td id="gananciasNetasValue">{{ costos_totales * (-1) }}</td>
        </tr>
        <tr>
            <td>Ganancias brutas por unidad</td>
            <td id="gananciasBrutasPorUnidadValue">{{ '%.2f'|format((costos_totales_sin_autoempleo * (-1)) / cantidad_vendida) }}</td>
        </tr>
        <tr>
            <td>Ganancias netas por unidad</td>
            <td id="gananciasNetasValuePorUnidadValue">{{ '%.2f'|format((costos_totales * (-1)) / cantidad_vendida) }}</td>
        </tr>
        <tr>
            <td>Margen de rentabilidad<sup class="footnote"><b>a</b></td>
            <td id="margenDeRentabilidadValue"></td>
        </tr>
        <tr>
            <td>Punto de equilibrio<sup class="footnote"><b>b</b></td>
            <td id="puntoDeEquilibrioValue"></td>
        </tr>
        {% if impuestos_venta %}
        <tr>
            <td>Impuestos sobre la venta</td>
            <td id="costosImpuestosValue">0</td>
        </tr>
        {% endif %}
    </table>
    {% if impuestos_venta %}
    <p>
    <b class="footnote">✱</b> Este indicador y todos los demás indicadores de la tabla consideran los siguientes impuestos:
    {% for impuesto in impuestos_venta %}
        {{ impuesto[0] }} ({{ impuesto[1]*100 }}% sobre la venta de {{ impuesto[2] }} {{ unidad }}){% if not loop.last %}, {% else %}.{% endif %}
    {% endfor %}
    </p>
    {% endif %}
    <p><b class="footnote">a</b>: El margen de rentabilidad indica qué porcentaje de los ingresos son ganancias. Se calcula dividiendo las ganancias netas entre los ingresos totales.</p>
    <p><b class="footnote">b</b>: El punto de equilibrio es la cantidad mínima de unidades que usted debe vender para cubrir todos sus costos y no tener ganancias ni pérdidas.</p>

    <div class="center-aligned">
    {% if trabajo_actividades %}
    <p>Costos laborales actividades</p>
    <table>
        <tr>
            <th>Actividad</th>
            <th>Trabajo</th>
            <th>Cantidad</th>
            <th>Unidad</th>
            <th>Costo<br>unidad</th>
            <th>Auto-<br>empleo</th>
            <th>Costo<br>total</th>
        </tr>
        {% for sublist in trabajo_actividades %}
            {% for item in sublist %}
                <tr>
                    <td>{{ item[0] }}</td>
                    <td>{{ item[1] }}</td>
                    <td>{{ item[2] }}</td>
                    <td>{{ item[3] }}</td>
                    <td>{{ item[4] }}</td>
                    <td>{{ item[5] }}</td>
                    <td>{{ item[6] }}</td>
                </tr>
            {% endfor %}
        {% endfor %}
    </table>
    {% endif %}
    {% if insumos_actividades %}
    <p>Costos insumos actividades</p>
    <table>
        <tr>
            <th>Actividad</th>
            <th>Insumo</th>
            <th>Cantidad</th>
            <th>Unidad</th>
            <th>Costo<br>unidad</th>
            <th>Costo<br>total</th>
        </tr>
        {% for sublist in insumos_actividades %}
            {% for item in sublist %}
                <tr>
                    <td>{{ item[0] }}</td>
                    <td>{{ item[1] }}</td>
                    <td>{{ item[2] }}</td>
                    <td>{{ item[3] }}</td>
                    <td>{{ item[4] }}</td>
                    <td>{{ item[5] }}</td>
                </tr>
            {% endfor %}
        {% endfor %}
    </table>
    {% endif %}
    {% if sueldos_fijos %}
    <p>Sueldos fijos</p>
    <table>
        <tr>
            <th>Trabajo</th>
            <th>Núm de<br><span>hrs., días,<br>meses</span></th>
            <th>Sueldo<span><br>por hora,<br>día o mes</span></th>
            <th>Porcen-<br>taje</th>
            <th>Auto-<br>empleo</th>
            <th>Costo<br>total</th>
        </tr>
        {% for sublist in sueldos_fijos %}
        <tr>
            <td>{{ sublist[1] }}</td>
            <td>{{ sublist[2] }}</td>
            <td>{{ sublist[3] }}</td>
            <td>{{ sublist[4] }}%</td>
            <td>{{ sublist[5] }}</td>
            <td>{{ sublist[6] }}</td>            
        </tr>
        {% endfor %}
    </table>
    {% endif %}
    {% if costos_fijos %}
    <p>Costos fijos no salariales</p>
    <table>
        <tr>
            <th>Descrip.<br><span>del</span> costo</th>
            <th>Monto</th>
            <th>Porcen-<br>taje</th>
            <th>Costo<br>total</th>
        </tr>
        {% for sublist in costos_fijos %}
        <tr>
            <td>{{ sublist[0] }}</td>
            <td>{{ sublist[1] }}</td>
            <td>{{ sublist[2] }}%</td>
            <td>{{ sublist[3] }}</td>          
        </tr>
        {% endfor %}
    </table>
    {% endif %}     
    {% if impuestos_fijos %}
    <p>Impuestos fijos</p>
    <table>
        <tr>
            <th>Nombre<br><span>del</span> impuesto</th>
            <th>Monto</th>
            <th>Porcen-<br>taje</th>
            <th>Costo<br>total</th>
        </tr>
        {% for sublist in impuestos_fijos %}
        <tr>
            <td>{{ sublist[0] }}</td>
            <td>{{ sublist[1] }}</td>
            <td>{{ sublist[2] }}%</td>
            <td>{{ sublist[3] }}</td>          
        </tr>
        {% endfor %}
    </table>
    {% endif %}     
    {% if costos_certificacion %}
    <div class="avoid-page-break">
    <p>Costos de certificación</p>
    <table>
        <tr>
            <th>Certificación</th>
            <th>Costo</th>
            <th>Porcen-<br>taje</th>
            <th>Costo<br>total</th>
        </tr>
        {% for sublist in costos_certificacion %}
        <tr>
            <td>{{ sublist[0] }}</td>
            <td>{{ sublist[1] }}</td>
            <td>{{ sublist[2] }}%</td>
            <td>{{ sublist[3] }}</td>          
        </tr>
        {% endfor %}
    </table>
    </div>
    {% endif %}
    {% if costos_exportacion %}
    <p>Costos de exportación</p>
    <table>
        <tr>
            <th>Descr. <span>del</span><br>costo/impuesto</th>
            <th>Monto <span>por<br>unidad/cargamento</span></th>
            <th>Núm. <span>de<br>unidades/cargamentos</span></th>
            <th>Costo<br>total</th>
        </tr>
        {% for sublist in costos_exportacion %}
        <tr>
            <td>{{ sublist[0] }}</td>
            <td>{{ sublist[1] }}</td>
            <td>{{ sublist[2] }}</td>
            <td>{{ sublist[3] }}</td>          
        </tr>
        {% endfor %}
    </table>
    {% endif %}
    </div>
    <button id="button">Click me!</button>

    <script>
      const btn = document.getElementById("button");

      btn.addEventListener("click", function() {
        var element = document.getElementById('body');
        var opt = {
          margin: 2.7,
          filename: 'analisis_costos_produccion.pdf',
        };

        // Set the configuration options before calling the .from().save() function
        html2pdf().set({
          pagebreak: { mode: 'avoid-all' }
        }).from(element).set(opt).save();
      });
    </script>


    <script>
        let impuestosVenta = {{ impuestos_venta|tojson }};
        let cantidadVendida = {{ cantidad_vendida }}
        let costosTotales = {{ costos_totales }}
        let costosTotalesSinAutoempleo = {{ costos_totales_sin_autoempleo }}
        let costosVariablesTotalesPorUnidad = {{ costos_variables_totales_por_unidad }}
        let costosFijosTotales = {{ costos_fijos_totales }}
        let costosImpuestos = 0;
        let precio = 0;

        function updatePrecioCell() {
            document.getElementById("precioCell").textContent = precio;
        }

        function updateIngresosTotales() {
            let ingresosTotales = precio * cantidadVendida;
            ingresosTotales -= costosImpuestos;
            document.getElementById("ingresosTotalesValue").textContent = ingresosTotales;
        }
        
        function updateGananciasBrutas() {
            let gananciasBrutas = (precio * cantidadVendida) - costosTotalesSinAutoempleo - costosImpuestos;
            document.getElementById("gananciasBrutasValue").textContent = gananciasBrutas;
        }

        function updateGananciasNetas() {
            let gananciasNetas = (precio * cantidadVendida) - costosTotales - costosImpuestos;
            document.getElementById("gananciasNetasValue").textContent = gananciasNetas;
        }

        function updateGananciasBrutasPorUnidad() {
            let gananciasBrutasPorUnidad = ((precio * cantidadVendida) - costosTotalesSinAutoempleo - costosImpuestos) / cantidadVendida;
            let formattedGananciasBrutasPorUnidad = gananciasBrutasPorUnidad.toFixed(2)
            document.getElementById("gananciasBrutasPorUnidadValue").textContent = formattedGananciasBrutasPorUnidad;
        }

        function updateGananciasNetasPorUnidad() {
            let gananciasNetasPorUnidad = ((precio * cantidadVendida) - costosTotales - costosImpuestos) / cantidadVendida;
            let formattedGananciasNetasPorUnidad = gananciasNetasPorUnidad.toFixed(2);
            document.getElementById("gananciasNetasValuePorUnidadValue").textContent = formattedGananciasNetasPorUnidad;
        }

        function updateMargenDeRentabilidad() {
            let margenDeRentabilidad = (((precio * cantidadVendida) - costosTotales - costosImpuestos) / (precio * cantidadVendida)) * 100;
            let formattedMargenDeRentabilidad = margenDeRentabilidad.toFixed(2);
            document.getElementById("margenDeRentabilidadValue").textContent = formattedMargenDeRentabilidad + "%";
        }

        function updatePuntoDeEquilibrio() {
            let puntoDeEquilibrio = costosFijosTotales / (precio - costosVariablesTotalesPorUnidad - (costosImpuestos/cantidadVendida));
            let formattedPuntoDeEquilibrio = puntoDeEquilibrio.toFixed(2)
            document.getElementById("puntoDeEquilibrioValue").textContent = formattedPuntoDeEquilibrio;
        }

        // Update the value of "precio" inside the table cell and the variable when the slider is moved
        document.getElementById("slider").addEventListener("input", function() {
            precio = parseInt(this.value);

            costosImpuestos = 0;
            if (impuestosVenta.length > 0) {
                // Iterate through each sublist in impuestosVenta and calculate the sum of the last element in each sublist
                for (let i = 0; i < impuestosVenta.length; i++) {
                    let sublist = impuestosVenta[i];
                    let precioMultiplication = precio * sublist[1] * sublist[2];
                    costosImpuestos += precioMultiplication;
                }
            }

            updateIngresosTotales();
            updatePrecioCell();
            updateGananciasBrutas();
            updateGananciasNetas()
            updateGananciasBrutasPorUnidad()
            updateGananciasNetasPorUnidad()
            updateMargenDeRentabilidad()
            updatePuntoDeEquilibrio()
        });

        // Initial calculations on page load
        updateGananciasBrutas();
        updateIngresosTotales();
        updatePrecioCell();
        updateGananciasNetas()
        updateGananciasBrutasPorUnidad()
        updateGananciasNetasPorUnidad()
        updateMargenDeRentabilidad()
        updatePuntoDeEquilibrio()
    </script>
</body>
</html>